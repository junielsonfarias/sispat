# üöÄ GUIA DE INSTALA√á√ÉO SISPAT 2.0 EM VPS LINUX

**Para usu√°rios SEM conhecimento t√©cnico**  
**Tempo:** 15-30 minutos  
**Dificuldade:** ‚≠ê F√°cil (tudo automatizado!)

---

## üìã **O QUE VOC√ä VAI PRECISAR**

### ‚úÖ **1. Um Servidor VPS Linux**
Qualquer provedor serve:
- **DigitalOcean** (recomendado para iniciantes)
- **Vultr**
- **Linode**
- **AWS Lightsail**
- **Google Cloud**
- **Contabo**
- **Hostinger VPS**

**Configura√ß√£o m√≠nima:**
- Sistema: Debian 11/12 ou Ubuntu 20.04/22.04/24.04
- RAM: 2GB (recomendado 4GB)
- Disco: 20GB (recomendado 50GB)
- CPU: 1 core (recomendado 2 cores)

### ‚úÖ **2. Um Dom√≠nio**
Qualquer provedor de dom√≠nio:
- **Registro.br** (para .com.br)
- **GoDaddy**
- **Namecheap**
- **Cloudflare**

**Exemplo:** `sispat.prefeitura.com.br`

### ‚úÖ **3. Acesso ao Servidor**
Voc√™ vai precisar saber como conectar no servidor via SSH.

---

## üéØ **INSTALA√á√ÉO EM 3 PASSOS**

### **PASSO 1: Configurar DNS** ‚è±Ô∏è 5 minutos

1. **Entre no painel do seu provedor de dom√≠nio**
2. **V√° em "Gerenciar DNS" ou "DNS Settings"**
3. **Adicione dois registros A:**

```
Nome: sispat
Tipo: A
Valor: IP_DO_SEU_SERVIDOR

Nome: api.sispat
Tipo: A  
Valor: IP_DO_SEU_SERVIDOR
```

**Exemplo:**
```
sispat.prefeitura.com.br     ‚Üí 192.168.1.100
api.sispat.prefeitura.com.br ‚Üí 192.168.1.100
```

4. **Aguarde 5-10 minutos** para o DNS propagar

---

### **PASSO 2: Conectar no Servidor** ‚è±Ô∏è 2 minutos

#### **No Windows:**
1. Baixe o **PuTTY**: https://www.putty.org
2. Abra o PuTTY
3. Digite o IP do servidor
4. Clique em "Open"
5. Digite o usu√°rio: `root`
6. Digite a senha fornecida pelo provedor

#### **No Mac/Linux:**
1. Abra o Terminal
2. Digite:
```bash
ssh root@IP_DO_SEU_SERVIDOR
```
3. Digite a senha quando solicitado

---

### **PASSO 3: Executar Instalador** ‚è±Ô∏è 15-30 minutos

#### **Copie e cole este comando no terminal:**

```bash
curl -fsSL https://raw.githubusercontent.com/junielsonfarias/sispat/main/install.sh | sudo bash
```

**O instalador vai fazer perguntas simples:**

---

## ü§î **PERGUNTAS QUE O INSTALADOR VAI FAZER**

### **Pergunta 1: Dom√≠nio**
```
‚ùØ Qual o dom√≠nio do sistema? [sispat.exemplo.com.br]:
```

**Responda com seu dom√≠nio:**
```
sispat.prefeitura.com.br
```

---

### **Pergunta 2: Email do Administrador**
```
‚ùØ Email do superusu√°rio (voc√™) [admin@sispat.prefeitura.com.br]:
```

**Responda com seu email:**
```
seu.email@gmail.com
```

---

### **Pergunta 3: Seu Nome**
```
‚ùØ Seu nome completo [Administrador SISPAT]:
```

**Responda com seu nome:**
```
Jo√£o Silva
```

---

### **Pergunta 4: Senha do Banco de Dados**
```
‚ùØ Senha do PostgreSQL (banco de dados) [padr√£o dispon√≠vel]:
```

**Op√ß√µes:**
- Pressione **ENTER** para usar a senha padr√£o (recomendado para testes)
- Ou digite uma senha de sua escolha

---

### **Pergunta 5: Senha do Superusu√°rio**
```
‚ùØ Senha do superusu√°rio [padr√£o dispon√≠vel]:
```

**Op√ß√µes:**
- Pressione **ENTER** para usar `Tiko6273@` (recomendado para testes)
- Ou digite sua pr√≥pria senha

---

### **Pergunta 6: Senha Padr√£o dos Usu√°rios**
```
‚ùØ Senha padr√£o para outros usu√°rios [padr√£o dispon√≠vel]:
```

**Op√ß√µes:**
- Pressione **ENTER** para usar `password123` (recomendado para testes)
- Ou digite uma senha de sua escolha

---

### **Pergunta 7: Nome do Munic√≠pio**
```
‚ùØ Nome do munic√≠pio/√≥rg√£o [Prefeitura Municipal]:
```

**Exemplo:**
```
Prefeitura Municipal de Vista Serrana
```

---

### **Pergunta 8: Estado**
```
‚ùØ Sigla do estado (UF) [XX]:
```

**Exemplo:**
```
PB
```

---

### **Pergunta 9: Configurar SSL**
```
‚ùØ Configurar SSL autom√°tico com Let's Encrypt? [S/n]:
```

**Op√ß√µes:**
- **S** (Sim) - Recomendado! Ativa HTTPS automaticamente
- **N** (N√£o) - Voc√™ configura depois manualmente

‚ö†Ô∏è **IMPORTANTE:** Seu DNS deve estar apontando para o servidor!

---

### **Pergunta 10: Confirma√ß√£o**
```
‚ùØ Confirma as configura√ß√µes acima? [S/n]:
```

O instalador mostra um resumo. Verifique e digite **S** para continuar.

---

## ‚è≥ **AGUARDE A INSTALA√á√ÉO**

O instalador vai executar automaticamente:

```
[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100%
‚úì Atualizando sistema...
‚úì Instalando Node.js 18...
‚úì Instalando PostgreSQL 15...
‚úì Instalando Nginx...
‚úì Configurando banco de dados...
‚úì Baixando c√≥digo do SISPAT...
‚úì Compilando aplica√ß√£o...
‚úì Configurando usu√°rios...
‚úì Iniciando sistema...
‚úì Configurando SSL...
```

**Aguarde at√© aparecer:**
```
üéâ  INSTALA√á√ÉO CONCLU√çDA COM SUCESSO!  üéâ
```

---

## üéâ **PRONTO! COMO ACESSAR**

Ap√≥s a instala√ß√£o concluir, voc√™ ver√°:

```
‚ïê‚ïê‚ïê INFORMA√á√ïES DE ACESSO ‚ïê‚ïê‚ïê

üåê URL do Sistema:
   https://sispat.prefeitura.com.br

üë§ ACESSO PRINCIPAL (ADMIN):
   Email: admin@ssbv.com
   Senha: password123

üë§ ACESSO SUPERUSU√ÅRIO (VOC√ä):
   Email: seu.email@gmail.com
   Senha: Tiko6273@
```

---

## üñ±Ô∏è **PRIMEIRO ACESSO**

### **1. Abra seu navegador**
Digite na barra de endere√ßo:
```
https://sispat.prefeitura.com.br
```

### **2. Fa√ßa login**
```
Email: admin@ssbv.com
Senha: password123
```

### **3. Pronto! Voc√™ est√° dentro do sistema!** üéâ

---

## üë• **CRIAR SEUS PR√ìPRIOS USU√ÅRIOS**

Ap√≥s fazer login:

1. Clique em **"Administra√ß√£o"** no menu lateral
2. Clique em **"Gerenciar Usu√°rios"**
3. Clique em **"+ Novo Usu√°rio"**
4. Preencha os dados:
   - Nome completo
   - Email
   - Senha
   - Fun√ß√£o (Admin, Supervisor, Usu√°rio, etc.)
   - Setores respons√°veis
5. Clique em **"Salvar"**

---

## üîß **COMANDOS √öTEIS**

### **Ver se o sistema est√° rodando:**
```bash
sudo systemctl status sispat-backend
```

### **Ver logs (se tiver problemas):**
```bash
pm2 logs sispat-backend
```

### **Reiniciar o sistema:**
```bash
pm2 restart sispat-backend
sudo systemctl restart nginx
```

### **Fazer backup manual:**
```bash
cd /var/www/sispat
./scripts/backup.sh
```

---

## üÜò **PROBLEMAS COMUNS E SOLU√á√ïES**

### **‚ùå Problema: "N√£o consigo acessar o site"**

**Solu√ß√£o 1: Verificar DNS**
```bash
# No seu computador, abra o terminal/cmd e digite:
ping sispat.prefeitura.com.br

# Deve retornar o IP do seu servidor
```

**Solu√ß√£o 2: Verificar se o sistema est√° rodando**
```bash
# No servidor VPS:
pm2 status

# Deve mostrar 'sispat-backend' com status 'online'
```

**Solu√ß√£o 3: Reiniciar tudo**
```bash
pm2 restart sispat-backend
sudo systemctl restart nginx
```

---

### **‚ùå Problema: "Login n√£o funciona"**

**Solu√ß√£o 1: Verificar se o banco tem usu√°rios**
```bash
cd /var/www/sispat/backend
npm run prisma:studio

# Abre uma interface web em http://SEU_IP:5555
# Verifique se a tabela 'users' tem registros
```

**Solu√ß√£o 2: Recriar usu√°rios**
```bash
cd /var/www/sispat/backend
npm run prisma:seed
```

---

### **‚ùå Problema: "Erro 502 Bad Gateway"**

**Solu√ß√£o:**
```bash
# Reiniciar o backend
pm2 restart sispat-backend

# Aguardar 10 segundos
sleep 10

# Testar
curl http://localhost:3000/health
```

---

### **‚ùå Problema: "SSL n√£o funciona"**

**Solu√ß√£o: Configurar SSL manualmente**
```bash
sudo certbot --nginx -d sispat.prefeitura.com.br -d api.sispat.prefeitura.com.br
```

Siga as instru√ß√µes na tela e pronto!

---

## üìû **PRECISA DE AJUDA?**

### **Op√ß√£o 1: Logs do Sistema**
```bash
# Ver log de instala√ß√£o
cat /var/log/sispat-install.log

# Ver logs do sistema
pm2 logs sispat-backend --lines 100
sudo tail -f /var/log/nginx/error.log
```

### **Op√ß√£o 2: Abrir Issue no GitHub**
https://github.com/junielsonfarias/sispat/issues

### **Op√ß√£o 3: Documenta√ß√£o Completa**
No servidor, em:
```
/var/www/sispat/DEPLOY_PRODUCTION.md
/var/www/sispat/README_PRODUCTION.md
```

---

## üéØ **RESUMO R√ÅPIDO**

### **Para Instalar:**
```bash
# 1. Conecte no servidor via SSH
ssh root@IP_DO_SERVIDOR

# 2. Execute o instalador
curl -fsSL https://raw.githubusercontent.com/junielsonfarias/sispat/main/install.sh | sudo bash

# 3. Responda as perguntas
# 4. Aguarde ~20 minutos
# 5. Acesse https://seudominio.com
```

### **Para Acessar:**
```
URL:   https://sispat.prefeitura.com.br
Email: admin@ssbv.com
Senha: password123
```

---

## ‚úÖ **CHECKLIST AP√ìS INSTALA√á√ÉO**

- [ ] DNS configurado e propagado
- [ ] Servidor VPS provisionado
- [ ] Instalador executado sem erros
- [ ] Sistema acess√≠vel via HTTPS
- [ ] Login funcionando
- [ ] Dashboard carregando
- [ ] Primeiros usu√°rios criados
- [ ] Backup autom√°tico ativo
- [ ] Monitoramento ativo

---

## üéä **PARAB√âNS!**

Voc√™ instalou o **SISPAT 2.0** com sucesso!

Agora voc√™ pode:
- ‚úÖ Cadastrar patrim√¥nios e im√≥veis
- ‚úÖ Criar usu√°rios e definir permiss√µes
- ‚úÖ Gerar relat√≥rios e PDFs
- ‚úÖ Visualizar dashboards
- ‚úÖ Fazer transfer√™ncias e doa√ß√µes
- ‚úÖ Controlar deprecia√ß√£o de bens
- ‚úÖ E muito mais!

---

## üìö **PR√ìXIMOS PASSOS**

1. **Explore o sistema** - Navegue pelos menus
2. **Crie usu√°rios** - V√° em Administra√ß√£o > Usu√°rios
3. **Configure o munic√≠pio** - V√° em Configura√ß√µes > Personaliza√ß√£o
4. **Cadastre setores** - V√° em Administra√ß√£o > Setores
5. **Cadastre locais** - V√° em Administra√ß√£o > Locais
6. **Cadastre patrim√¥nios** - V√° em Bens > Novo Patrim√¥nio

---

## üõ°Ô∏è **SEGURAN√áA**

### **Para Produ√ß√£o com Dados Reais:**

Altere as senhas ap√≥s a instala√ß√£o:

1. **Acesse o sistema**
2. **V√° em seu perfil** (canto superior direito)
3. **Clique em "Alterar Senha"**
4. **Digite uma senha forte:**
   - M√≠nimo 12 caracteres
   - Letras mai√∫sculas e min√∫sculas
   - N√∫meros
   - S√≠mbolos (@, #, $, !, etc.)

**Exemplo de senha forte:**
```
Prefeitura@2025#Segura!
```

---

## üìñ **GUIAS ADICIONAIS**

### **No Servidor:**
```
/var/www/sispat/CREDENCIAIS_PRODUCAO.md  ‚Üí Todas as credenciais
/var/www/sispat/DEPLOY_PRODUCTION.md     ‚Üí Guia t√©cnico completo
/var/www/sispat/README_PRODUCTION.md     ‚Üí Documenta√ß√£o de produ√ß√£o
/var/www/sispat/GUIA_RAPIDO_DEPLOY.md    ‚Üí Deploy em 30 minutos
```

### **Online:**
```
GitHub: https://github.com/junielsonfarias/sispat
Issues: https://github.com/junielsonfarias/sispat/issues
```

---

## üé¨ **V√çDEO TUTORIAL** (Exemplo do Processo)

### **1. Conectar no Servidor (SSH)**
```
Windows: Usar PuTTY
Mac/Linux: Usar Terminal

Comando: ssh root@192.168.1.100
Senha: [senha fornecida pelo provedor]
```

### **2. Executar Instalador**
```bash
curl -fsSL https://raw.githubusercontent.com/junielsonfarias/sispat/main/install.sh | sudo bash
```

### **3. Responder Perguntas**
```
Dom√≠nio: sispat.prefeitura.com.br
Email: seu.email@gmail.com
Nome: Jo√£o Silva
[Pressionar ENTER nas outras para usar padr√µes]
```

### **4. Aguardar Instala√ß√£o**
```
[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100%
‚úì Sistema instalado!
```

### **5. Acessar Sistema**
```
Abrir navegador: https://sispat.prefeitura.com.br
Login: admin@ssbv.com
Senha: password123
```

---

## üéØ **EXEMPLO COMPLETO DE INSTALA√á√ÉO**

### **Cen√°rio: Prefeitura de Vista Serrana - PB**

```bash
# 1. SSH no servidor
ssh root@192.168.1.100

# 2. Executar instalador
curl -fsSL https://raw.githubusercontent.com/junielsonfarias/sispat/main/install.sh | sudo bash

# 3. Responder:
Dom√≠nio: sispat.vistaserrana.pb.gov.br
Email: secretario@vistaserrana.pb.gov.br
Nome: Jos√© da Silva
[ENTER nas senhas para usar padr√µes]
Munic√≠pio: Prefeitura Municipal de Vista Serrana
Estado: PB
SSL: S (Sim)

# 4. Aguardar ~20 minutos

# 5. Acessar
https://sispat.vistaserrana.pb.gov.br
Email: admin@ssbv.com
Senha: password123
```

---

## üí° **DICAS IMPORTANTES**

### ‚úÖ **FA√áA:**
- Configure o DNS ANTES de instalar
- Use HTTPS (SSL) sempre que poss√≠vel
- Anote as senhas em local seguro
- Fa√ßa backup regularmente
- Teste todas as funcionalidades

### ‚ùå **N√ÉO FA√áA:**
- N√£o interrompa a instala√ß√£o
- N√£o feche o terminal durante a instala√ß√£o
- N√£o use senhas fracas em produ√ß√£o real
- N√£o esque√ßa de anotar as credenciais

---

## üîÑ **REINSTALAR (Se Necess√°rio)**

Se algo der errado, voc√™ pode reinstalar:

```bash
# 1. Remover instala√ß√£o anterior
sudo rm -rf /var/www/sispat
sudo -u postgres psql -c "DROP DATABASE IF EXISTS sispat_prod;"
sudo -u postgres psql -c "DROP USER IF EXISTS sispat_user;"
pm2 delete sispat-backend

# 2. Executar instalador novamente
curl -fsSL https://raw.githubusercontent.com/junielsonfarias/sispat/main/install.sh | sudo bash
```

---

## üìä **O QUE O INSTALADOR FAZ**

### **Automaticamente:**
1. ‚úÖ Atualiza o sistema operacional
2. ‚úÖ Instala Node.js 18
3. ‚úÖ Instala PostgreSQL 15
4. ‚úÖ Instala Nginx
5. ‚úÖ Instala PM2 (gerenciador de processos)
6. ‚úÖ Instala Certbot (SSL)
7. ‚úÖ Cria banco de dados
8. ‚úÖ Baixa c√≥digo do GitHub
9. ‚úÖ Compila aplica√ß√£o
10. ‚úÖ Configura Nginx
11. ‚úÖ Configura SSL (opcional)
12. ‚úÖ Cria usu√°rios do sistema
13. ‚úÖ Inicia aplica√ß√£o
14. ‚úÖ Configura backup autom√°tico
15. ‚úÖ Configura monitoramento
16. ‚úÖ Configura firewall

### **Sem voc√™ precisar fazer NADA!**

---

## üéØ **TEMPO ESTIMADO POR ETAPA**

| Etapa | Tempo | O que acontece |
|-------|-------|----------------|
| **DNS** | 5 min | Configurar dom√≠nio |
| **Conectar SSH** | 2 min | Entrar no servidor |
| **Responder perguntas** | 3 min | Configurar instala√ß√£o |
| **Instala√ß√£o autom√°tica** | 15-25 min | Sistema instala tudo |
| **Primeiro acesso** | 1 min | Fazer login |
| **TOTAL** | **25-35 min** | Sistema 100% funcional |

---

## üì± **ACESSAR DE QUALQUER LUGAR**

Ap√≥s instalado, voc√™ pode acessar de:
- üíª Computador
- üì± Celular
- üñ•Ô∏è Tablet
- üåê Qualquer navegador moderno

Basta acessar: `https://seudominio.com.br`

---

## üèÜ **RESULTADO FINAL**

Voc√™ ter√°:
- ‚úÖ Sistema SISPAT 2.0 rodando
- ‚úÖ HTTPS ativo (seguro)
- ‚úÖ Usu√°rios criados e funcionais
- ‚úÖ Banco de dados configurado
- ‚úÖ Backup autom√°tico di√°rio
- ‚úÖ Monitoramento a cada 5 minutos
- ‚úÖ Pronto para uso imediato

---

## üìû **SUPORTE**

### **Se tiver d√∫vidas:**

1. **Documenta√ß√£o completa:**
   - No servidor: `/var/www/sispat/README_PRODUCTION.md`
   - GitHub: https://github.com/junielsonfarias/sispat

2. **Problemas t√©cnicos:**
   - GitHub Issues: https://github.com/junielsonfarias/sispat/issues

3. **Logs do sistema:**
   - Instala√ß√£o: `/var/log/sispat-install.log`
   - Aplica√ß√£o: `pm2 logs sispat-backend`

---

## üéâ **BEM-VINDO AO SISPAT 2.0!**

Sistema profissional de gest√£o patrimonial instalado e pronto para uso!

**Desenvolvido com ‚ù§Ô∏è para facilitar a gest√£o p√∫blica**

---

**üìÖ √öltima atualiza√ß√£o:** 08/10/2025  
**üì¶ Vers√£o:** SISPAT 2.0.0  
**üîó Reposit√≥rio:** https://github.com/junielsonfarias/sispat
