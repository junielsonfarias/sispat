â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“‹ COMANDOS PARA EXECUTAR NO SERVIDOR LINUX (VIA SSH)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  IMPORTANTE: Estes comandos devem ser executados NO SERVIDOR,
    nÃ£o no Windows local!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  CONECTAR AO SERVIDOR VIA SSH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ssh root@sispat.vps-kinghost.net


2ï¸âƒ£  ATUALIZAR CÃ“DIGO DO REPOSITÃ“RIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

cd /var/www/sispat
git pull origin main


3ï¸âƒ£  CORRIGIR PERMISSÃ•ES (USANDO SCRIPT)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Dar permissÃ£o de execuÃ§Ã£o ao script
chmod +x scripts/corrigir-permissoes-logs.sh

# Executar script
./scripts/corrigir-permissoes-logs.sh


4ï¸âƒ£  CORRIGIR PERMISSÃ•ES (MANUAL - PASSO A PASSO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# 1. Corrigir permissÃµes de logs
sudo chown -R www-data:www-data /var/www/sispat/backend/logs/
sudo chmod -R 755 /var/www/sispat/backend/logs/

# 2. Corrigir permissÃµes de uploads
sudo chown -R www-data:www-data /var/www/sispat/backend/uploads/
sudo find /var/www/sispat/backend/uploads -type f -exec chmod 644 {} \;
sudo find /var/www/sispat/backend/uploads -type d -exec chmod 755 {} \;

# 3. Parar backend
pm2 stop sispat-backend
pm2 delete sispat-backend

# 4. Reiniciar backend
cd /var/www/sispat/backend
pm2 start ecosystem.config.js --env production
pm2 save


5ï¸âƒ£  VERIFICAR STATUS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ver processos PM2
pm2 status

# Ver logs do backend
pm2 logs sispat-backend --lines 50

# Verificar permissÃµes
ls -la /var/www/sispat/backend/logs/
ls -la /var/www/sispat/backend/uploads/ | head -10


6ï¸âƒ£  COMANDOS RÃPIDOS (COPIE E COLE TUDO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

cd /var/www/sispat && \
git pull origin main && \
sudo chown -R www-data:www-data /var/www/sispat/backend/logs/ /var/www/sispat/backend/uploads/ && \
sudo chmod -R 755 /var/www/sispat/backend/logs/ && \
sudo find /var/www/sispat/backend/uploads -type f -exec chmod 644 {} \; && \
sudo find /var/www/sispat/backend/uploads -type d -exec chmod 755 {} \; && \
pm2 stop sispat-backend 2>/dev/null; pm2 delete sispat-backend 2>/dev/null; \
cd /var/www/sispat/backend && pm2 start ecosystem.config.js --env production && \
pm2 save && \
echo "âœ… ConcluÃ­do!" && \
pm2 status


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ’¡ DICAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ Se o backend nÃ£o compilar, execute:
  cd /var/www/sispat/backend
  npm run build

â€¢ Se o PM2 nÃ£o encontrar o processo, ele jÃ¡ foi parado.
  Apenas inicie novamente com:
  cd /var/www/sispat/backend
  pm2 start ecosystem.config.js --env production

â€¢ Para ver logs em tempo real:
  pm2 logs sispat-backend

â€¢ Para parar logs (Ctrl+C)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

